<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Lista de Agencias y Sedes</title>
</head>
<body>
<h1>Agencias Registradas</h1>

<table border="1">
  <thead>
  <tr>
    <th>Ciudad Agencia</th>
    <th>Email</th>
    <th>Teléfono</th>
    <th>Tipo</th>
    <th>Sede Ciudad</th>
    <th>Dirección</th>
    <th>Gerente</th>
    <th>Categoría</th>
    <th>Acciones</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="item : ${agenciasConSede}">
    <td th:text="${item.agencia.ciudad}">Ciudad Agencia</td>
    <td th:text="${item.agencia.email}">Email</td>
    <td th:text="${item.agencia.telefono}">Teléfono</td>
    <td th:text="${item.agencia.tipoAgencia}">Tipo</td>

    <td th:text="${item.sede != null ? item.sede.ciudad : 'Sin sede'}">Ciudad Sede</td>
    <td th:text="${item.sede != null ? item.sede.direccion : '-'}">Dirección</td>
    <td th:text="${item.sede != null ? item.sede.gerente : '-'}">Gerente</td>
    <td th:text="${item.sede != null ? item.sede.categoriaSede : '-'}">Categoría</td>

    <td>
      <a th:href="@{'/paquete/nuevo/' + ${item.agencia.id}}">Agregar paquete</a><br/>
      <a th:href="@{'/agencia/' + ${item.agencia.id} + '/paquetes'}">Ver paquetes</a><br/>

      <span th:if="${item.sede != null}">
        <a th:href="@{/sede/{id}/agregar-servicios(id=${item.sede.id})}">Agregar Servicios</a>
      </span>
    </td>
  </tr>
  </tbody>
</table>

<br>
<a href="/agencia/nueva">Registrar nueva agencia</a>
</body>
</html>
